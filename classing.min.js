"use strict";function Classing(descriptors){return Classing.create(descriptors)}module.exports=exports=Classing;Classing.create=function(descriptors){descriptors=descriptors||{};var Class=this.makeConstructor();this.makeStatic(Class,descriptors);this.makePrototype(Class,descriptors);return Class};Classing.makeConstructor=function(){function Class(config){if(!(this instanceof Class)){return new Class(config)}this.applyDefaults();if(config){this.configure(config)}this.initialize()}return Class};Classing.makeStatic=function(Class,descriptors){var Classing=this;Object.defineProperties(Class,{create:{configurable:true,value:function(properties){return new Class(properties)}},descriptors:{value:descriptors},defineProperty:{configurable:true,value:function(name,descriptor,skipReload){descriptor=descriptor||{value:null};if(typeof descriptor==="function"){descriptor={enumerable:false,configurable:true,writable:true,value:descriptor}}if(descriptor.value===undefined&&!(descriptor.get||descriptor.set)){descriptor.value=null}if(descriptor.writable==null&&descriptor.value!==undefined){descriptor.writable=true}if(descriptor.enumerable==null){descriptor.enumerable=true}if(descriptor.configurable==null){descriptor.configurable=true}descriptors[name]=descriptor;Object.defineProperty(this.prototype,name,descriptor);if(!skipReload){if(!this.prototype.applyDefaults||this.prototype.applyDefaults.isAutoGenerated){this.prototype.applyDefaults=Class.makeApplyDefaults(descriptors)}if(!this.prototype.configure||this.prototype.configure.isAutoGenerated){this.prototype.configure=Class.makeConfigure(descriptors)}if(!this.prototype.toJSON||this.prototype.toJSON.isAutoGenerated){this.prototype.toJSON=Class.makeToJSON(descriptors)}}return this}},defineProperties:{configurable:true,value:function(items){if(!items){return this}var keys=Object.keys(items),total=keys.length,key,i;for(i=0;i<total;i++){key=keys[i];this.defineProperty(key,items[key],true)}if(!this.prototype.applyDefaults||this.prototype.applyDefaults.isAutoGenerated){this.prototype.applyDefaults=Class.makeApplyDefaults(descriptors)}if(!this.prototype.configure||this.prototype.configure.isAutoGenerated){this.prototype.configure=Class.makeConfigure(descriptors)}if(!this.prototype.toJSON||this.prototype.toJSON.isAutoGenerated){this.prototype.toJSON=Class.makeToJSON(descriptors)}return this}},inherits:{configurable:true,value:function(Super){var keys=Object.keys(Super),total=keys.length,key,i;for(i=0;i<total;i++){key=keys[i];if(!this.hasOwnProperty(key)){this[key]=Super[key]}}var superDescriptors=Super.descriptors||{};keys=Object.keys(superDescriptors);total=keys.length;for(i=0;i<total;i++){key=keys[i];if(!descriptors.hasOwnProperty(key)){descriptors[key]=superDescriptors[key]}}descriptors.super={enumerable:false,value:Super.prototype};this.prototype=Object.create(Super.prototype,descriptors);this.prototype.constructor=this;if(!this.prototype.applyDefaults||this.prototype.applyDefaults.isAutoGenerated){this.prototype.applyDefaults=Class.makeApplyDefaults(descriptors)}if(!this.prototype.configure||this.prototype.configure.isAutoGenerated){this.prototype.configure=Class.makeConfigure(descriptors)}if(!this.prototype.toJSON||this.prototype.toJSON.isAutoGenerated){this.prototype.toJSON=Class.makeToJSON(descriptors)}return this}},extend:{configurable:true,value:function(config){var Child=Classing.create(config);Child.inherits(this);return Child}},mixin:{configurable:true,value:function(source){var keys=Object.keys(source),total=keys.length,combined={},key,i;for(i=0;i<total;i++){key=keys[i];combined[key]={value:source[key]}}this.defineProperties(combined);return this}},makeApplyDefaults:{configurable:true,value:function(descriptors){var keys=Object.keys(descriptors),total=keys.length,body="",key,descriptor,i,suffix,value;for(i=0;i<total;i++){key=keys[i];descriptor=descriptors[key];if(descriptor.hasOwnProperty("default")){suffix="";if(typeof descriptor.default==="function"){suffix="(this)"}if(/^([\w|_|$]+)$/.test(key)){body+="this."+key+" = this.constructor.descriptors."+key+".default"+suffix+";"}else{body+='this["'+key+'"] = this.constructor.descriptors["'+key+'"].default'+suffix+";"}}else if(descriptor.bind){if(/^([\w|_|$]+)$/.test(key)){if(descriptor.bind===true){value="this"}else{value="this.constructor.descriptors."+key+".bind"}body+="this."+key+" = this."+key+".bind("+value+");"}else{if(descriptor.bind===true){value="this"}else{value='this.constructor.descriptors["'+key+'"].bind'}body+='this["'+key+'"] = this["'+key+'"].bind('+value+");"}}}var applyDefaults=new Function(body);applyDefaults.isAutoGenerated=true;return applyDefaults}},makeConfigure:{configurable:true,value:function(descriptors){var keys=Object.keys(descriptors),total=keys.length,body="",key,descriptor,i;for(i=0;i<total;i++){key=keys[i];descriptor=descriptors[key];if(descriptor.writable||descriptor.hasOwnProperty("set")){if(/^([\w|_|$]+)$/.test(key)){body+="this."+key+" = config."+key+" !== undefined ? config."+key+" : this."+key+";"}else{body+='this["'+key+'"] = config["'+key+'"] !== undefined ? config["'+key+'"] : this["'+key+'"];'}}}var configure=new Function("config",body);configure.isAutoGenerated=true;return configure}},makeToJSON:{configurable:true,value:function(descriptors){var keys=Object.keys(descriptors),total=keys.length,parts=[],key,descriptor,i;for(i=0;i<total;i++){key=keys[i];descriptor=descriptors[key];if(descriptor.enumerable||descriptor.enumerable==null){if(/^([\w|_|$]+)$/.test(key)){parts.push(key+": this."+key)}else{parts.push('"'+key+'": this["'+key+'"]')}}}var toJSON=new Function("return {"+parts.join(",")+"};");toJSON.isAutoGenerated=true;return toJSON}}})};Classing.makePrototype=function(Class,descriptors){Class.defineProperties(descriptors);if(!descriptors.initialize){Class.defineProperty("initialize",function(){})}if(!descriptors.applyDefaults){Object.defineProperty(Class.prototype,"applyDefaults",{configurable:true,writable:true,value:Class.makeApplyDefaults(descriptors)})}if(!descriptors.configure){Object.defineProperty(Class.prototype,"configure",{configurable:true,writable:true,value:Class.makeConfigure(descriptors)})}if(!descriptors.toJSON){Object.defineProperty(Class.prototype,"toJSON",{configurable:true,writable:true,value:Class.makeToJSON(descriptors)})}};Classing.extend=function(descriptors){descriptors=descriptors||{};function Child(descriptors){return Child.create(descriptors)}var keys=Object.keys(this),total=keys.length,i,key;for(i=0;i<total;i++){key=keys[i];Child[key]=this[key]}keys=Object.keys(descriptors);total=keys.length;for(i=0;i<total;i++){key=keys[i];if(typeof descriptors[key]==="function"){descriptors[key]={configurable:true,value:descriptors[key]}}}Object.defineProperties(Child,descriptors);Child.super=this;return Child};